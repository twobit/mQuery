<!DOCTYPE html>
<html>
    <head>
        <title>mQuery Manual Test: Try to fix Chrome bug</title>
        <script type="text/javascript" src="../mQuery.js"></script>
    </head>
    <body>
        <script type="text/javascript">
        var mq = mQuery('screen', {minWidth: '600px'}).bind(function() {
            console.log(this.media());
        });

        /* Try to fix Chrome bug (chrome.html) */
        for (var i = 0; i < document.styleSheets.length; i++) {
            for (var j = 0; j < document.styleSheets[i].cssRules.length; j++) {
                if (document.styleSheets[i].cssRules[j].media) {
                    document.styleSheets[i].cssRules[j].insertRule('@media ' + mq.media() + '{body{}}', 0);

                    console.log(document.styleSheets[i].cssRules[j]);
                    console.log(document.styleSheets[i].cssRules[j].media.mediaText);
                }
            }
        }
        // '@media ' + mq.media() + '{body{}}', 0
        console.log('@media ' + mq.media() + '{body{}}', 0);
        console.log(document.styleSheets);
        </script>
    </body>
</html>